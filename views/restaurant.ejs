
<!DOCTYPE html>
<html lang="en">
<% include ./partials/_header %>
</div>
    <ul> <h2> ðŸ”¥ Orders to Action ðŸ”¥</h2>

    <p>Orders are listed from most recent to oldest. The estimated default time is calculated but can be overriden. The entered and confirmed time will be sent to the customer. Please ensure you verify the customer upon pick up and before pressing "Picked Up"</p>
  </ul>

    <table class="table table-hover">
  <thead class="thead-dark">
    <tr>
      <th scope="col"></th>
      <th scope="col">Time</th>
      <th scope="col">Order Id</th>
      <th scope="col">Pizza Order</th>
      <th scope="col">Extra Order</th>
      <th scope="col">Customer Name</th>
      <th scope="col">Customer Number</th>
      <th scope="col">Confirm Time</th>
      <th scope="col">Pick Up</th>
    </tr>
  </thead>
  <tbody>
    <% for (i = orders.length - 1 ; i >= 0; i--) {
    var minutes = orders[i]['time_placed'].getMinutes()
    if(minutes <= 9) {
    minutes = "0" + orders[i]['time_placed'].getMinutes()
    }
    %>
    <tr>
      <th scope="row"></th>
      <td><%= orders[i]['time_placed'].getHours()%>:<%= minutes
        %> &nbsp - <%= orders[i]['time_placed'].toLocaleDateString() %></td>
      <td><%= orders[i]['id'] %></td>
      <td><%= JSON.stringify(orders[i]['pizza_order']) %></td>
      <td><%= JSON.stringify(orders[i]['extra']) %></td>
      <td><%= orders[i]['name'] %></td>
      <td><%= orders[i]['phone'] %></td>
      <% if(orders[i]['time_confirmed'] === null){ %>
      <td> <form class="form-inline"  action="/restaurant/confirm_time" method="POST">
    <input id="cookminutes" class="form-control" placeholder="<%= orders[i]['estimated_time'] %> " value="<%= orders[i]['estimated_time']%>"></input>
    <p> &nbsp mins &nbsp</p>
  </div>
  <button id="confirmcookminutes" class="btn btn-danger mb-2 confirmCookMinutes" margin-top=2% >Confirm</button>
</form>
<% } else {
  var minutesOrder = orders[i]['time_confirmed'].getMinutes()
  if(minutesOrder <= 9) {
  minutesOrder = "0" + orders[i]['time_confirmed'].getMinutes() 
  }
  %>
  <td>
<a><%= orders[i]['time_confirmed'].getHours()%>:<%= minutesOrder %></a>
  <% } %>
</td>
<% if(orders[i]['time_confirmed'] !== null){ %>
        <td>
  
        <button id="pickedupchecked" class="btn btn-dark mb-2" margin-top=2% >Picked Up</button></td>

    </tr>
    <% } else { %>
      <td>
      </tr>

      <% } %>
   <% } %>
    </tr>
  </tbody>
</table>


  </body>
</html>
